<div class="pb-10 pr-10 flex flex-col h-screen overflow-y-scroll relative scrollbar-none">
    <app-ui-gradient-blur class="block rotate-180 h-16 fixed inset-0 top-0" />
    <div class="sticky inset-x-0 top-0 min-h-16 flex items-center">
        <button (click)="openSearch()" class="flex items-center gap-2 font-display bg-background/60 rounded-default backdrop-blur pl-3 pr-1.5 py-1.5 w-72 hover:border-text/10 text-text/60 group border border-transparent transition-colors">
            <ng-icon name="lucideSearch" size="20" class="text-text/40 group-hover:text-primary transition-colors"></ng-icon>
            Search
            <span class="flex-1"></span>
            <app-ui-kdb>
                <ng-icon name="lucideCommand" size="16" />
                K
            </app-ui-kdb>
        </button >
    </div>

    @if (isLoggedIn$ | async) {
    <app-post-form />
    <div class="mb-8"></div>
    }
    <div class="flex gap-2 mb-4">
        <button [classList]="['section-item', currentSection() === 'latest' ? 'bg-secondary/20' : 'hover:bg-text/5 text-text/80'].join(' ')" (click)="setSection('latest')">
            <ng-icon [class]="currentSection() === 'latest' ? 'text-primary' : ''"  name="lucideHistory" size="24" />
            Latest
        </button>
        @if (isLoggedIn$ | async) {
            <button [classList]="['section-item', currentSection() === 'following' ? 'bg-secondary/20' : 'hover:bg-text/5 text-text/80'].join(' ')" (click)="setSection('following')">
                <ng-icon [class]="currentSection() === 'following' ? 'text-primary' : ''"  name="lucideHeart" size="24" />
                Following
            </button>
        }
    </div>

    @if (currentSection() === "latest") {
    <app-posts-list [data]="latestPosts$" [fetchMore]="fetchMoreLatest.bind(this)" />
    } @else {
    <app-posts-list [data]="followingPosts$" [fetchMore]="fetchMoreFollowing.bind(this)" />
    }
</div>
